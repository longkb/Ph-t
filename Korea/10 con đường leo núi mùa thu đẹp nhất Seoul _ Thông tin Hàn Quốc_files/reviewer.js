jQuery(document).ready(function(a){function e(){a(".rwp-knob").knob({readOnly:!0,thickness:.2,width:100,height:100,bgColor:"#e5e5e5",inputColor:"#3b3c3e",fontWeight:"bold"})}function t(){a(".rwp-knob-table").knob({readOnly:!0,thickness:.25,width:50,height:50,bgColor:"#e5e5e5",inputColor:"#3b3c3e",fontWeight:"bold",inline:!1})}function r(){var e;a(".rwp-slider").each(function(){e=i(a(this).data("step")),a(this).noUiSlider({step:a(this).data("step"),start:a(this).data("val"),connect:"lower",range:{min:a(this).data("min"),max:a(this).data("max")},format:wNumb({decimals:e})}),a(this).Link("lower").to(a(this).parent().find("input"),null,wNumb({decimals:e}))})}function i(a){var e=parseFloat(a),t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}a(".rwp-scores-sliders").length>0&&r(),a(".rwp-knob").length>0&&e(),a(".rwp-knob-table").length>0&&t(),a(".rwp-submit-ur").click(function(t){t.preventDefault();var r=a(this),i=a(this).parent().parent(),n=i.find('input[name="rwp-ur[review-id]"]').val(),s=i.find('input[name="rwp-ur[post-id]"]').val(),d=i.find('input[name="rwp-ur[user-id]"]').val(),p=i.find('input[name="rwp-ur[mode]"]').val(),c=i.find('input[name="rwp-ur[template]"]').val(),o=i.find('input[name="rwp-ur[name]"]').val();o="undefined"==typeof o?"":o;var f=i.find('input[name="rwp-ur[title]"]').val();f="undefined"==typeof f?"":f;var l=i.find('textarea[name="rwp-ur[comment]"]').val();l="undefined"==typeof l?"":l;var u=i.find('input[name="rwp-ur[captcha]"]').val();u="undefined"==typeof u?"":u;var h=i.find('input[name="rwp-ur[email]"]').val();h="undefined"==typeof h?"":h;var w;switch(p){case"five_stars":var v=i.find("input.rwp-rating:checked").val();w="undefined"==typeof v?0:v;break;case"full_five_stars":w=[];var m=i.find("input.rwp-rating:checked");0!=m.length&&m.each(function(){var e={};e.i=a(this).data("index"),e.val=a(this).val(),w.push(e)});break;default:w=[];var m=i.find(".rwp-slider");0!=m.length&&m.each(function(){var e={};e.i=a(this).data("index"),e.val=a(this).val(),w.push(e)})}var b={action:reviewerRatingObj.action,security:reviewerRatingObj.ajax_nonce,review_id:n,post_id:s,scores:w,user_id:d,user_name:o,user_email:h,title:f,comment:l,method:p,template:c,captcha:u},k=i.find(".rwp-loader");k.fadeIn("fast"),a.post(reviewerRatingObj.ajax_url,b,function(t){var d=i.find(".rwp-notification");switch(d.html(""),t.code){case 405:k.fadeOut("fast"),a.each(t.data,function(a,e){d.append(e+"<br/>")}),i.find(".rwp-captcha-image").attr("src",t.captcha),i.find(".rwp-captcha-input").val("");break;case 400:k.fadeOut("fast"),d.html(t.data.msg);break;case 401:k.fadeOut("fast"),d.html(t.data.msg),i.find(".rwp-captcha-image").attr("src",t.data.captcha),i.find(".rwp-captcha-input").val("");break;case 200:d.addClass("rwp-success"),d.html(t.data.msg);var p=i.find('input[name="rwp-ur[branch]"]').val();p="undefined"==typeof p?!1:!0,p?setTimeout(function(){location.reload()},1e3):a.ajax({url:"",cache:!1,context:document.body,success:function(t){k.fadeOut("fast");var r=a(t),d=r.find("#rwp-review-"+s+"-"+n+" .rwp-review"),p=i.parent().parent().parent().parent();p.find(".rwp-review").remove(),p.hide().append(d).fadeIn("fast"),p.find(".rwp-knob").length>0&&e()}});break;case 201:k.fadeOut("fast"),d.addClass("rwp-success"),d.html(t.data.msg);var c=r.parent();c.find("input").remove();var o=a("#rwp-ratings-form-"+s+"-"+n);o.find(".rwp-ratings-form").slideUp("fast"),o.append(c)}},"json").fail(function(){k.fadeOut("fast"),alert("Error during rating process!")})}),a(".rwp-review-wrap").on("click",".rwp-on .rwp-like span, .rwp-on .rwp-dislike span",function(e){e.preventDefault();var t=a(this).data("rating-id"),r=a(this).data("post-id"),i=a(this).data("method"),n=a(this).data("user-id"),s=a(this).parent().parent(),d={action:reviewerLikeObj.action,security:reviewerLikeObj.ajax_nonce,rating_id:t,post_id:r,user_id:n,method:i},p=s.find(".rwp-loader");p.fadeIn("fast");var c=a(this).parent().find("em");a.post(reviewerLikeObj.ajax_url,d,function(a){switch(p.fadeOut("fast"),a.code){case 400:alert(a.data.msg);break;case 200:var e="like"==i?a.data.like:a.data.dislike;c.html(e),s.removeClass("rwp-on").addClass("rwp-off");break;default:alert("Error in like/dislike process!")}},"json").fail(function(){p.fadeOut("fast"),alert("Error during like/dislike process!")})}),a(".rwp-review-wrap").on("click",".rwp-show-more",function(){for(var e=(a(this).data("per-page"),a(this).parent().find(".rwp-users-reviews .rwp-user-review.rwp-hidden")),t=0;5>t;t++)a(e[t]).removeClass("rwp-hidden");e=a(this).parent().find(".rwp-users-reviews .rwp-user-review.rwp-hidden"),e.length<=0&&a(this).remove()}),a(".rwp-refresh-captcha-btn").click(function(e){e.preventDefault();var t=a(this).data("review-id"),r=a(this).data("post-id"),i={action:rwpCaptchaObj.action,security:rwpCaptchaObj.ajax_nonce,review_id:t,post_id:r},n=a(this).parent();a.post(rwpCaptchaObj.ajax_url,i,function(a){switch(a.code){case 400:alert(a.data.msg);break;case 200:n.find(".rwp-captcha-image").attr("src",a.captcha),n.find(".rwp-captcha-input").val("");break;default:alert("Error in like/dislike process!")}},"json").fail(function(){loader.fadeOut("fast"),alert("Error Refreshing Captcha")})})});
